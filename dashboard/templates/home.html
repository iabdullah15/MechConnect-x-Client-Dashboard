{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}

{% if not is_authenticated %}
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h1 class="h4 mb-3">Welcome</h1>
          <p class="text-muted mb-4">
            Please sign in to access your dashboard.
          </p>
          <a class="btn btn-primary" href="{% url 'login' %}">Login</a>
        </div>
      </div>
    </div>
  </div>

{% else %}

  {% if is_master %}
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <h2 class="h5 mb-3">You are logged in as <span class="badge bg-dark">MASTER</span></h2>
        <div class="d-flex gap-2 flex-wrap">
          <a class="btn btn-outline-primary" href="{% url 'master_dashboard' %}">Open Master Dashboard</a>
        </div>
      </div>
    </div>

    <div class="card shadow-sm">
      <div class="card-body">
        <h3 class="h6 mb-3">Client Dashboards</h3>
        {% if orgs %}
          <div class="list-group">
            {% for o in orgs %}
              <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                 href="{% url 'client_dashboard' org_slug=o.slug %}">
                <span>{{ o.name }}</span>
                <span class="text-muted small">{{ o.slug }}</span>
              </a>
            {% endfor %}
          </div>
        {% else %}
          <div class="alert alert-secondary mb-0">No organizations found.</div>
        {% endif %}
      </div>
    </div>

  {% else %}
    <div class="card shadow-sm">
      <div class="card-body">
        <h2 class="h5 mb-3">You are logged in as <span class="badge bg-secondary">CLIENT</span></h2>
        {% if client_org %}
          <p class="mb-3 text-muted">Organization: <strong>{{ client_org.name }}</strong></p>
          <a class="btn btn-primary" href="{% url 'client_dashboard' org_slug=client_org.slug %}">
            Open {{ client_org.name }} Dashboard
          </a>
        {% else %}
          <div class="alert alert-warning mb-0">
            Your account is not assigned to an organization yet. Please contact support.
          </div>
        {% endif %}
      </div>
    </div>
  {% endif %}

{% endif %}

{% endblock %}
